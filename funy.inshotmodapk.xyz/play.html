<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=375, user-scalable=no" />
    <title>FUNY - GAMES</title>
    <link rel="icon" href="logo.png" />
    <link rel="stylesheet" href="prod-css/play.css" />
</head>

<body>
    <div class="playPage loadingAnimation" id="playPage">
        <div class="gameBanner" onclick="gotoPlayGame()">
            <img hidden class="bgdimg gameImgUrl" src="" alt="" />
            
            <div class="gameBannerbox">
                <img class="mainImg gameImgUrl" src="./assets/placeholder.svg" alt="" srcset="" />
                
                <div style="width: 100%; min-height: 250px; text-align: center;">
                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3585186215296886"
                        crossorigin="anonymous"></script>
                    <!-- funy.inshotmodapk_display_01 -->
                    <ins class="adsbygoogle"
                        style="display:block"
                        data-ad-client="ca-pub-3585186215296886"
                        data-ad-slot="4457156695"
                        data-ad-format="auto"
                        data-full-width-responsive="true"></ins>
                    <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <div class="gameStats">
                    <div class="rating">
                        <span class="stars">★★★★★</span>
                        <span class="score">4.8</span>
                    </div>
                    <div class="tags">
                        <span class="tag">#Hot</span>
                        <span class="tag">#Featured</span>
                    </div>
                </div>
                <div class="gameTitle font4"></div>
                <div class="footer">
                    <div class="gameMsg">
                        <img src="./assets/a.png" alt="" />
                        <div class="font08 gameMsgNum"></div>
                    </div>
                    <div class="gameMsg">
                        <img src="./assets/b.png" alt="" />
                        <div class="font08 gameMsgNum"></div>
                    </div>
                    <div class="gameMsg">
                        <img src="./assets/c.png" alt="" />
                        <div class="font08 gameMsgNum"></div>
                    </div>
                    <div class="gameMsg">
                        <img src="./assets/d.png" alt="" />
                        <div class="font08 gameMsgNum"></div>
                    </div>
                </div>
                <div class="playButton font3" onclick="gotoPlayGame()">
                    <!-- <img src="./assets/kaishi.png" alt=""> -->
                    Play
                </div>
                <div class="description-container">
                    <div class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zM6 20V4h7v5h5v11H6z" fill="currentColor"/>
                        </svg>
                        <span>Description</span>
                    </div>
                    <div class="description font2"></div>
                </div>
            </div>
        </div>
        
        <div class="similar-container">
            <div class="section-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z" fill="currentColor"/>
                </svg>
                <span>Similar Games</span>
            </div>
            <div class="SimilarGame"></div>
        </div>
        <a href="./">
            <div class="HomeButton font1">
                <img src="./assets/fanhui.png" alt="" srcset="" />
            </div>
        </a>
    </div>
</body>
<script type="module">
    import { getGamesListApi, getGamesListCategory } from "./assets/js/business.js";

    const urlParams = new URLSearchParams(window.location.search);
    const title = urlParams.get("title");
    let allGameList = await getGamesListApi({ name: title });
    window.gamedata = allGameList[0];

    Array.prototype.forEach.call(
        document.getElementsByClassName("gameImgUrl"),
        (item) => {
            item.src = gamedata.thumb;
        }
    );

    Array.prototype.forEach.call(
        document.getElementsByClassName("gameTitle"),
        (item) => {
            item.innerHTML = gamedata.title;
        }
    );

    Array.from(document.getElementsByClassName("gameMsgNum"))[0].innerHTML = Math.floor(Math.random() * 1000)
    Array.from(document.getElementsByClassName("gameMsgNum"))[1].innerHTML = Math.floor(Math.random() * 100)
    Array.from(document.getElementsByClassName("gameMsgNum"))[2].innerHTML = Math.floor(Math.random() * 2000)
    Array.from(document.getElementsByClassName("gameMsgNum"))[3].innerHTML = Math.floor(Math.random() * 3000)

    document.querySelector(".description").innerHTML = gamedata.description;

     // 关闭首评加载动画的时机
     document.querySelector('.playPage').classList.toggle('loadingAnimation', false)
    // 关闭首评加载动画的时机

    let SimilarGameList = await getGamesListApi({ num: 30, category: getGamesListCategory.indexOf(gamedata.category) });

    SimilarGameList.forEach((item) => {
        document.querySelector(".SimilarGame").innerHTML += `
            <a href="play.html?title=${item.title}">
                <div class="gameItem"> <img src="${item.thumb}" alt=""></div>
            </a>`
    })


    window.gotoPlayGame = function () {
        window.location.href = 'gamePage.html?id=' + gamedata.url.split('/').filter(Boolean).pop();
    }

</script>

<!-- gtag -->

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H6E5GEJ9V0"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-H6E5GEJ9V0');
    </script>
        

</html>